# 모두의 핏 앱 2차 개발 기능 정의서

## 1. 문서 개요

### 1.1 프로젝트 정보
- **프로젝트명**: 모두의 핏 (All4Fit) 앱
- **버전**: 2.0
- **작성일**: 2025년 10월
- **대상 플랫폼**: iOS, Android

### 1.2 문서 목적
본 문서는 1차 개발 기능 정의서를 기반으로 모두의 핏 앱의 2차 개발 범위 기능을 체계적으로 정의합니다. 시설 운영자의 시설 편집 기능과 지도자의 정보 수정 기능을 중심으로 작성되었습니다.

### 1.3 개발 범위
- **2차 개발**: 시설 운영자 시설 편집, 지도자 정보 수정, 시설 예약 시스템, 문의 시스템, 알림, 관리자 웹
- **1차 개발 기반**: 인증, 사용자 관리, 공공데이터 기반 시설 조회, 검색, 위치, 지도 기능 유지
- **신규 기능**: 시설/지도자 편집, 시설 예약, 문의, 알림, 관리자 웹 (회원가입 승인, 통합 관리)

### 1.4 개발 우선순위
| 우선순위 | 기능 그룹 | 세부 기능 |
|---------|----------|-----------|
| **P0 (최우선)** | 관리자 웹 - 회원가입 승인 | 지도자/시설운영자 가입 승인 시스템 |
| **P0 (최우선)** | 시설 운영자 - 시설 편집 | 시설 정보 수정, 운영시간 설정 |
| **P1 (높음)** | 시설 예약 시스템 | 예약하기, 예약관리, 예약확인 |
| **P1 (높음)** | 지도자 - 프로필 편집 | 지도자 정보 수정, 자격증 관리 |
| **P1 (높음)** | 문의 시스템 | 시설/지도자 문의, 답변 관리 |
| **P2 (중간)** | 관리자 웹 - 사용자 관리 | 전체 사용자 조회, 권한 관리 |
| **P2 (중간)** | 알림 시스템 | 푸시 알림, 예약 알림, 문의 알림 |
| **P2 (중간)** | 관리자 웹 - 시설/지도자 관리 | 시설/지도자 승인, 정보 관리 |
| **P3 (낮음)** | 관리자 웹 - 통계 분석 | 사용자/시설/예약 통계, 수익 분석 |
| **P3 (낮음)** | 관리자 웹 - 푸시 알림 관리 | 전체 사용자 대상 푸시 발송 |

## 2. 시설 운영자 전용 기능 (FACILITY_OPERATOR)

### 2.1 시설 운영자 대시보드 (FACILITY_OPERATOR_DASHBOARD)
**화면 ID**: FACILITY_OPERATOR_DASHBOARD  
**계층 레벨**: 2  
**상위 화면**: 메인 앱  
**하위 화면**: 시설편집, 예약관리, 문의관리  
**네비게이션 타입**: 탭네비게이션  
**접근 방식**: 시설운영자권한  
**사용자 타입**: 시설운영자  

#### 주요 기능
- 시설 운영 현황 대시보드
- 예약 현황, 문의 현황 한눈에 보기
- 시설 편집 및 관리 기능 접근

#### 하위 기능
- **시설 편집**: 시설 정보 수정 및 관리
- **예약 관리**: 예약 현황 및 승인/거부
- **문의 관리**: 문의사항 조회 및 답변

### 2.2 시설 편집 (FACILITY_EDIT)
**화면 ID**: FACILITY_EDIT  
**계층 레벨**: 3  
**상위 화면**: 시설 운영자 대시보드  
**하위 화면**: 기본정보편집, 운영시간편집  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 시설편집버튼  
**사용자 타입**: 시설운영자  

#### 주요 기능
- 시설 기본 정보 수정
- 운영 시간 및 요일별 운영 설정

#### 하위 기능
- **기본 정보 편집 (FACILITY_EDIT_BASIC)**
  - 시설명, 주소, 전화번호 수정
  - 시설 유형 및 운동 종목 선택
  - 시설 소개 및 특징 입력
- **운영 시간 편집 (FACILITY_EDIT_HOURS)**
  - 요일별 운영 시간 설정
  - 휴무일 및 특별 운영 시간 설정
  - 예약 가능 시간대 설정

#### 검증 규칙
- 필수 정보 입력 검증
- 운영 시간 논리적 검증

#### 데이터 우선순위 규칙
- **시설 운영자 등록 데이터 우선**: API에서 가져온 공공데이터와 시설 운영자가 직접 등록한 데이터가 중복될 경우, 시설 운영자가 등록한 데이터가 우선적으로 표시됩니다.
- **데이터 소스 구분**: 사용자에게는 시설 운영자가 직접 관리하는 정보임을 명시하여 신뢰성을 높입니다.
- **자동 동기화 제외**: 시설 운영자가 등록한 정보는 공공데이터 API 업데이트에 의해 자동으로 덮어쓰이지 않습니다.

### 2.3 예약 관리 (FACILITY_RESERVATION_MANAGE)
**화면 ID**: FACILITY_RESERVATION_MANAGE  
**계층 레벨**: 3  
**상위 화면**: 시설 운영자 대시보드  
**하위 화면**: 예약목록, 예약상세, 예약승인  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 예약관리버튼  
**사용자 타입**: 시설운영자  

#### 주요 기능
- 예약 현황 조회 및 관리
- 예약 승인/거부 처리
- 예약 일정 관리
- 예약 취소 및 변경 처리

#### 하위 기능
- **예약 목록 (FACILITY_RESERVATION_LIST)**
  - 날짜별 예약 현황 조회
  - 예약 상태별 필터링 (대기/승인/거부/완료)
  - 예약자 정보 및 연락처 확인
- **예약 상세 (FACILITY_RESERVATION_DETAIL)**
  - 예약 상세 정보 조회
  - 예약 승인/거부 처리
  - 예약자와의 메시지 교환
- **예약 승인 (FACILITY_RESERVATION_APPROVE)**
  - 일괄 승인 기능
  - 승인 조건 설정
  - 자동 승인 규칙 설정

### 2.4 문의 관리 (FACILITY_INQUIRY_MANAGE)
**화면 ID**: FACILITY_INQUIRY_MANAGE  
**계층 레벨**: 3  
**상위 화면**: 시설 운영자 대시보드  
**하위 화면**: 문의목록, 문의답변  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 문의관리버튼  
**사용자 타입**: 시설운영자  

#### 주요 기능
- 시설 관련 문의사항 조회
- 문의에 대한 답변 작성
- 문의 상태 관리
- 문의 통계 및 분석

## 3. 지도자 전용 기능 (INSTRUCTOR)

### 3.1 지도자 대시보드 (INSTRUCTOR_DASHBOARD)
**화면 ID**: INSTRUCTOR_DASHBOARD  
**계층 레벨**: 2  
**상위 화면**: 메인 앱  
**하위 화면**: 프로필편집, 문의관리  
**네비게이션 타입**: 탭네비게이션  
**접근 방식**: 지도자권한  
**사용자 타입**: 지도자  

#### 주요 기능
- 지도자 활동 현황 대시보드
- 문의 현황 및 답변 관리
- 프로필 편집 및 관리 기능 접근

#### 하위 기능
- **프로필 편집**: 지도자 정보 수정 및 관리
- **문의 관리**: 사용자 문의 조회 및 답변

### 3.2 지도자 프로필 편집 (INSTRUCTOR_PROFILE_EDIT)
**화면 ID**: INSTRUCTOR_PROFILE_EDIT  
**계층 레벨**: 3  
**상위 화면**: 지도자 대시보드  
**하위 화면**: 기본정보편집, 자격정보편집  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 프로필편집버튼  
**사용자 타입**: 지도자  

#### 주요 기능
- 지도자 기본 정보 수정
- 자격증 및 경력 정보 관리

#### 하위 기능
- **기본 정보 편집 (INSTRUCTOR_EDIT_BASIC)**
  - 이름, 연락처, 이메일 수정
  - 생년월일, 성별, 거주지역 수정
  - 한줄 소개 및 상세 소개 입력
  - 프로필 이미지 업로드
- **자격 정보 편집 (INSTRUCTOR_EDIT_QUALIFICATIONS)**
  - 자격증 정보 추가/수정/삭제
  - 자격증 이미지 업로드
  - 경력 사항 입력 및 관리
  - 전문 분야 및 보유 기술 설정

#### 검증 규칙
- 필수 정보 입력 검증
- 자격증 이미지 파일 형식 및 크기 제한

### 3.3 지도자 문의 관리 (INSTRUCTOR_INQUIRY_MANAGE)
**화면 ID**: INSTRUCTOR_INQUIRY_MANAGE  
**계층 레벨**: 3  
**상위 화면**: 지도자 대시보드  
**하위 화면**: 문의목록, 문의답변  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 문의관리버튼  
**사용자 타입**: 지도자  

#### 주요 기능
- 사용자 문의사항 조회 및 관리
- 문의에 대한 답변 작성
- 문의 상태 관리
- 문의 통계 및 분석

#### 하위 기능
- **문의 목록 (INSTRUCTOR_INQUIRY_LIST)**
  - 문의 목록 조회
  - 문의 상태별 필터링 (미답변/답변완료)
  - 문의자 정보 및 연락처 확인
- **문의 답변 (INSTRUCTOR_INQUIRY_REPLY)**
  - 문의 상세 정보 조회
  - 답변 작성 및 수정
  - 답변 알림 발송


## 4. 관리자 웹 기능 (ADMIN_WEB)

### 4.1 관리자 대시보드 (ADMIN_DASHBOARD)
**화면 ID**: ADMIN_DASHBOARD  
**계층 레벨**: 1  
**상위 화면**: 관리자 웹 메인  
**하위 화면**: 회원가입승인, 사용자관리, 시설관리, 지도자관리, 푸시알림관리, 통계분석  
**네비게이션 타입**: 웹네비게이션  
**접근 방식**: 관리자권한  
**사용자 타입**: 관리자  

#### 주요 기능
- 전체 시스템 현황 대시보드
- 회원가입 승인 대기 현황
- 사용자, 시설, 지도자 통계
- 시스템 운영 현황 모니터링

#### 하위 기능
- **회원가입 승인**: 지도자/시설운영자 가입 승인/거부
- **사용자 관리**: 전체 사용자 조회 및 관리
- **시설 관리**: 시설 정보 관리 및 승인
- **지도자 관리**: 지도자 정보 관리 및 승인
- **푸시 알림 관리**: 전체 사용자 대상 푸시 알림 발송
- **통계 분석**: 서비스 이용 통계 및 분석

### 4.2 회원가입 승인 관리 (ADMIN_APPROVAL_MANAGE)
**화면 ID**: ADMIN_APPROVAL_MANAGE  
**계층 레벨**: 2  
**상위 화면**: 관리자 대시보드  
**하위 화면**: 지도자승인, 시설운영자승인, 승인상세  
**네비게이션 타입**: 웹네비게이션  
**접근 방식**: 승인관리버튼  
**사용자 타입**: 관리자  

#### 주요 기능
- 지도자 회원가입 승인/거부
- 시설운영자 회원가입 승인/거부
- 승인 대기 목록 관리
- 승인 이력 조회

#### 하위 기능
- **지도자 승인 (ADMIN_INSTRUCTOR_APPROVAL)**
  - 지도자 가입 신청 목록 조회
  - 자격증 및 증빙서류 검토
  - 승인/거부 처리 및 사유 입력
  - 승인 완료 시 지도자 권한 부여
- **시설운영자 승인 (ADMIN_FACILITY_OPERATOR_APPROVAL)**
  - 시설운영자 가입 신청 목록 조회
  - 사업자등록증 및 시설 증빙서류 검토
  - 승인/거부 처리 및 사유 입력
  - 승인 완료 시 시설운영자 권한 부여
- **승인 상세 (ADMIN_APPROVAL_DETAIL)**
  - 신청자 상세 정보 조회
  - 업로드된 서류 다운로드 및 검토
  - 승인/거부 처리 및 메모 작성
  - 승인 결과 알림 발송

#### 검증 규칙
- 필수 서류 업로드 확인
- 자격증 유효성 검증
- 사업자등록증 유효성 검증
- 중복 가입 방지

### 4.3 사용자 관리 (ADMIN_USER_MANAGE)
**화면 ID**: ADMIN_USER_MANAGE  
**계층 레벨**: 2  
**상위 화면**: 관리자 대시보드  
**하위 화면**: 사용자목록, 사용자상세, 권한관리  
**네비게이션 타입**: 웹네비게이션  
**접근 방식**: 사용자관리버튼  
**사용자 타입**: 관리자  

#### 주요 기능
- 전체 사용자 조회 및 관리
- 사용자 권한 관리
- 사용자 상태 관리 (활성/비활성/정지)
- 사용자 통계 및 분석

#### 하위 기능
- **사용자 목록 (ADMIN_USER_LIST)**
  - 사용자 타입별 필터링 (일반/지도자/시설운영자)
  - 가입일, 최근 로그인, 상태별 정렬
  - 사용자 검색 (이름, 이메일, 전화번호)
  - 일괄 작업 (권한 변경, 상태 변경)
- **사용자 상세 (ADMIN_USER_DETAIL)**
  - 사용자 기본 정보 조회
  - 가입 이력 및 활동 내역
  - 권한 변경 및 상태 관리
  - 계정 정지/해제 처리
- **권한 관리 (ADMIN_PERMISSION_MANAGE)**
  - 사용자별 권한 설정
  - 권한 그룹 관리
  - 권한 변경 이력 조회

### 4.4 시설 관리 (ADMIN_FACILITY_MANAGE)
**화면 ID**: ADMIN_FACILITY_MANAGE  
**계층 레벨**: 2  
**상위 화면**: 관리자 대시보드  
**하위 화면**: 시설목록, 시설상세, 시설승인  
**네비게이션 타입**: 웹네비게이션  
**접근 방식**: 시설관리버튼  
**사용자 타입**: 관리자  

#### 주요 기능
- 등록된 시설 전체 관리
- 시설 정보 검증 및 승인
- 시설 운영 현황 모니터링
- 시설 관련 문의 및 신고 처리

#### 하위 기능
- **시설 목록 (ADMIN_FACILITY_LIST)**
  - 시설 상태별 필터링 (승인대기/승인완료/정지)
  - 지역별, 종목별 시설 검색
  - 시설 운영자 정보 연동
  - 시설 통계 (예약수, 문의수, 평점)
- **시설 상세 (ADMIN_FACILITY_DETAIL)**
  - 시설 기본 정보 및 운영 정보
  - 시설 운영자 정보
  - 시설 편집 이력 조회
  - 시설 관련 문의 및 신고 내역
- **시설 승인 (ADMIN_FACILITY_APPROVAL)**
  - 시설 등록 신청 검토
  - 시설 정보 검증
  - 승인/거부 처리
  - 승인 완료 시 시설 공개

### 4.5 지도자 관리 (ADMIN_INSTRUCTOR_MANAGE)
**화면 ID**: ADMIN_INSTRUCTOR_MANAGE  
**계층 레벨**: 2  
**상위 화면**: 관리자 대시보드  
**하위 화면**: 지도자목록, 지도자상세, 자격증관리  
**네비게이션 타입**: 웹네비게이션  
**접근 방식**: 지도자관리버튼  
**사용자 타입**: 관리자  

#### 주요 기능
- 등록된 지도자 전체 관리
- 지도자 자격증 검증 및 관리
- 지도자 활동 현황 모니터링
- 지도자 관련 문의 및 신고 처리

#### 하위 기능
- **지도자 목록 (ADMIN_INSTRUCTOR_LIST)**
  - 지도자 상태별 필터링 (승인대기/승인완료/정지)
  - 전문 분야별 지도자 검색
  - 소속 시설 정보 연동
  - 지도자 통계 (문의수, 평점, 활동도)
- **지도자 상세 (ADMIN_INSTRUCTOR_DETAIL)**
  - 지도자 기본 정보 및 프로필
  - 자격증 및 경력 정보
  - 소속 시설 및 활동 내역
  - 지도자 관련 문의 및 신고 내역
- **자격증 관리 (ADMIN_QUALIFICATION_MANAGE)**
  - 지도자 자격증 검증
  - 자격증 유효성 확인
  - 자격증 갱신 알림 관리
  - 자격증 관련 신고 처리

### 4.6 푸시 알림 관리 (ADMIN_PUSH_MANAGE)
**화면 ID**: ADMIN_PUSH_MANAGE  
**계층 레벨**: 2  
**상위 화면**: 관리자 대시보드  
**하위 화면**: 푸시발송, 푸시템플릿, 푸시이력  
**네비게이션 타입**: 웹네비게이션  
**접근 방식**: 푸시관리버튼  
**사용자 타입**: 관리자  

#### 주요 기능
- 전체 사용자 대상 푸시 알림 발송
- 사용자 타입별 푸시 알림 발송
- 푸시 알림 템플릿 관리
- 푸시 발송 이력 및 통계 조회

#### 하위 기능
- **푸시 발송 (ADMIN_PUSH_SEND)**
  - 전체 사용자 대상 푸시 발송
  - 사용자 타입별 푸시 발송 (일반/지도자/시설운영자)
  - 지역별 푸시 발송
  - 즉시 발송 / 예약 발송 설정
  - 푸시 내용 작성 (제목, 내용, 이미지)
  - 발송 대상자 미리보기
- **푸시 템플릿 (ADMIN_PUSH_TEMPLATE)**
  - 푸시 알림 템플릿 생성 및 관리
  - 템플릿 카테고리별 분류
  - 자주 사용하는 푸시 템플릿 저장
  - 템플릿 수정 및 삭제
- **푸시 이력 (ADMIN_PUSH_HISTORY)**
  - 발송된 푸시 알림 이력 조회
  - 발송 성공/실패 통계
  - 푸시 열람률 및 클릭률 분석
  - 발송자 및 발송 시간 기록

#### 검증 규칙
- 푸시 내용 길이 제한 (제목: 50자, 내용: 200자)
- 이미지 파일 형식 및 크기 제한
- 발송 대상자 수 제한 (일괄 발송 시)
- 중복 발송 방지

### 4.7 통계 및 분석 (ADMIN_STATISTICS)
**화면 ID**: ADMIN_STATISTICS  
**계층 레벨**: 2  
**상위 화면**: 관리자 대시보드  
**하위 화면**: 사용자통계, 시설통계, 예약통계, 수익통계  
**네비게이션 타입**: 웹네비게이션  
**접근 방식**: 통계분석버튼  
**사용자 타입**: 관리자  

#### 주요 기능
- 서비스 이용 통계 및 분석
- 사용자 활동 패턴 분석
- 시설 및 지도자 성과 분석
- 수익 및 비즈니스 지표 분석

#### 하위 기능
- **사용자 통계 (ADMIN_USER_STATISTICS)**
  - 가입자 수 및 증감률
  - 사용자 타입별 분포
  - 지역별 사용자 분포
  - 사용자 활동도 분석
- **시설 통계 (ADMIN_FACILITY_STATISTICS)**
  - 등록 시설 수 및 증감률
  - 시설 유형별 분포
  - 지역별 시설 분포
  - 시설별 예약 및 이용률
- **예약 통계 (ADMIN_RESERVATION_STATISTICS)**
  - 예약 건수 및 증감률
  - 예약 성사율 분석
  - 시간대별 예약 패턴
  - 취소율 및 노쇼율 분석
- **수익 통계 (ADMIN_REVENUE_STATISTICS)**
  - 수익 현황 및 증감률
  - 수익원별 분석
  - 지역별 수익 분포
  - 수익 예측 및 트렌드 분석

## 5. 공통 신규 기능

### 5.1 시설 예약 시스템 (FACILITY_RESERVATION_SYSTEM)
**화면 ID**: FACILITY_RESERVATION_SYSTEM  
**계층 레벨**: 2  
**상위 화면**: 메인 앱  
**하위 화면**: 예약하기, 예약확인, 예약취소  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 예약버튼  
**사용자 타입**: ALL  

#### 주요 기능
- 시설 예약 (지도자 예약 제외)
- 예약 현황 확인
- 예약 취소 및 변경
- 예약 알림 및 리마인더

### 5.2 문의 시스템 (INQUIRY_SYSTEM)
**화면 ID**: INQUIRY_SYSTEM  
**계층 레벨**: 2  
**상위 화면**: 메인 앱  
**하위 화면**: 문의하기, 문의내역, 문의답변  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 문의버튼  
**사용자 타입**: ALL  

#### 주요 기능
- 시설 및 지도자 문의
- 문의 내역 조회
- 문의 답변 확인
- 문의 상태 추적

#### 하위 기능
- **시설 문의**: 시설 운영자에게 문의
- **지도자 문의**: 지도자에게 개인 문의
- **문의 답변**: 시설 운영자/지도자가 답변

### 5.3 알림 시스템 (NOTIFICATION_SYSTEM)
**화면 ID**: NOTIFICATION_SYSTEM  
**계층 레벨**: 2  
**상위 화면**: 메인 앱  
**하위 화면**: 알림목록, 알림설정, 푸시알림  
**네비게이션 타입**: 스택네비게이션  
**접근 방식**: 알림버튼  
**사용자 타입**: ALL  

#### 주요 기능
- 시설 예약, 문의 알림
- 푸시 알림 설정
- 알림 내역 조회
- 알림 읽음 처리

## 6. 기술적 요구사항

### 6.1 플랫폼 지원
- iOS 13.0 이상
- Android API 21 이상
- 반응형 디자인

### 6.2 외부 서비스 연동
- 카카오 로그인 API
- SMS 인증 서비스
- 지도 API (네이버/구글)
- 이미지 업로드 서비스
- 푸시 알림 서비스
- 결제 시스템 연동

### 6.3 보안 요구사항
- JWT 기반 토큰 인증
- 개인정보 암호화 저장
- HTTPS 통신 강제
- 입력 데이터 검증 및 Sanitization
- 파일 업로드 보안 검증

### 6.4 성능 요구사항
- 이미지 레이지 로딩
- API 응답 캐싱
- 빠른 화면 전환
- 위치 기반 검색 최적화
- 실시간 알림 처리

### 6.5 데이터베이스 요구사항
- 시설 편집 이력 관리
- 지도자 프로필 변경 이력
- 예약 및 결제 데이터 관리
- 알림 및 메시지 데이터

---

*작성일: 2025년 10월*  
*버전: 2.0*  
*작성자: 김진석*  
*기반 문서: 1차 개발 기능 정의서*  
*개발 범위: 2차 개발 - 시설 편집, 지도자 정보 수정, 시설 예약/문의/알림 기능 추가, 관리자 웹 (회원가입 승인, 통합 관리)*
